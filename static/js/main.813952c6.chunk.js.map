{"version":3,"sources":["App.js","index.js","../../src/mappers.mjs","../../src/useId.mjs","../../src/Address.jsx","../../src/country.mjs"],"names":["App","className","classNames","select","grid","gridRow","gridColumn","label","input","ReactDOM","render","StrictMode","document","getElementById","definitions","defaults","country","address1","address2","administrative_area","locality","sublocality","postal_code","sorting_code","expand","data","kind","reduce","expanded","key","index","value","expandFlags","flags","flag","Math","pow","serverHandoffComplete","id","genId","useId","idFromProps","initialId","React","useState","setId","window","createElement","useLayoutEffect","useEffect","defaultClassNames","container","option","countries","compressed","map","row","subdivisions","code","name","labels","required","AddressContext","createContext","Grid","Fragment","GridRow","useContext","columns","Object","entries","filter","Input","replace","letter","toUpperCase","length","Subdivisions","htmlFor","autoCorrect","autoComplete","spellCheck","aria-required","type","style","color","subdivision","props","defaultCountry","countryCode","setCountryCode","Provider","boxSizing","onChange","e","target","values"],"mappings":"2KAEe,SAASA,IACvB,OACC,sBAAKC,UAAU,kCAAf,UACC,qBAAKA,UAAU,eAAf,SACC,qBAAIA,UAAU,uGAAd,UACC,sBAAMA,UAAU,WAAhB,0BACA,sBAAMA,UAAU,2BAAhB,gCAGF,qBAAKA,UAAU,WAAf,SACC,qBAAKA,UAAU,uBAAf,SACC,cAAC,UAAD,CACCC,WAAa,CACZC,OAAQ,wIACRC,KAAM,YACNC,QAAS,iBACTC,WAAY,SACZC,MAAO,QACPC,MAAO,kJ,MCfdC,IAASC,OACR,cAAC,IAAMC,WAAP,UACC,cAACX,EAAD,MAEDY,SAASC,eAAe,U,oUCJnBC,UAJgB,GAKX,CACT,UACA,WACA,WACA,sBACA,WACA,cACA,cACA,kBAZqB,GAcX,CACV,OACA,OACA,OACA,SACA,WACA,kBAnByB,GAqBX,CACd,OACA,WAIIC,UA7BgB,GA8BX,CACTC,QAAS,UACTC,SAAU,UACVC,SAAU,iBACVC,oBAAqB,WACrBC,SAAU,OACVC,YAAa,SACbC,YAAa,SACbC,aAAc,4BAkCAC,EAAOC,EAAMC,GAC5B,MAAO,UAAIZ,EAAYY,IACrBC,QAAO,SAACC,EAAUC,EAAKC,GACvB,IAAMC,WAA+BN,EAAKK,GACvC,EACAL,EAAKK,GAMR,OAJAF,EAASC,GAAO,IAAME,GAASL,KAAQX,GAAYc,KAAOd,EAASW,GAChEX,EAASW,GAAMG,GACfE,EAEIH,IACL,aAGWI,EAAYC,EAAOP,GAClC,MAAO,UAAIZ,EAAYY,IACrBC,QAAO,SAACC,EAAUC,EAAKC,GACvB,IAAMI,EAAOC,KAAKC,IAAI,EAAGN,GAEzB,OADAF,EAASC,IAAQI,EAAQC,GAAQ,EAC1BN,IACL,IC1FL,IAAIS,KACAC,EAAK,EAEHC,EAAQ,mBAAQD,YAENE,EAAMC,GACrB,IAAMC,EAAYD,IAAgBJ,EAAwBE,IAAU,QAEhDI,UAAMC,SAASF,GAA5BJ,OAAIO,OAgBX,OAOmB,oBAAXC,QACPA,OAAOlC,UACPkC,OAAOlC,SAASmC,cAtBdJ,UAAMK,gBACNL,UAAMM,YAEiB,WACrB,OAASX,GACZO,EAAMN,OAEL,IAEHI,UAAMM,WAAU,WACfZ,OACE,IAEU,MAANC,YACMA,SChBd,IAAMY,EAAoB,CACzBC,UAAW,GACXhD,OAAQ,GACRiD,OAAQ,GACRhD,KAAM,GACNC,QAAS,GACTC,WAAY,GACZC,MAAO,GACPC,MAAO,IAGF6C,y5mDAAiB1B,QAAO,SAACF,EAAM6B,GACpC,IAAMtC,WCvB+BsC,GACpC,IAAM1B,EAAWJ,EAAO8B,EHDH,GGWrB,OARA1B,EAASxB,KAAOwB,EAASxB,KAAKmD,KAAI,mBAAOvB,EAAYwB,EHJjC,MGKpB5B,EAAS6B,aAAe7B,EAAS6B,aAAaF,KAAI,gBAAEG,OAAMC,OAEzD,MAAO,CAAED,OAAMC,KADfA,EAAOA,GAAQD,MAGhB9B,EAASgC,OAASpC,EAAOI,EAASgC,OHTd,GGUpBhC,EAASiC,SAAW7B,EAAYJ,EAASiC,SHVrB,GGYbjC,EDYFZ,CAAwBsC,GAE9B,OADA7B,EAAKT,EAAQ0C,MAAQ1C,EACdS,IACL,IAEGqC,EAAiBnB,UAAMoB,cAAc,IAgD3C,SAASC,KACR,OACCrB,wBAACsB,kBAFa7D,KAGNmD,KAAI,mBAAOZ,wBAACuB,GAAQV,IAAMA,QAKpC,SAASU,SAAUV,QACVtD,EAAeiE,aAAWL,GAA1B5D,WAEFkE,EAAUC,OAAOC,QAAQd,GAC7Be,QAAO,2BACPhB,KAAI,2BAEN,OACCZ,+BAAK1C,UAAYC,EAAWG,SACzB+D,EAAQb,KAAI,mBAAQZ,wBAAC6B,GAAMb,KAAOA,QAKvC,SAASa,SAAQb,WACgBQ,aAAWL,GAAnC9C,YAASd,eACT0D,EAAmC5C,EAAnC4C,OAAQC,EAA2B7C,EAA3B6C,SAAUJ,EAAiBzC,EAAjByC,aACpBnB,EAAKE,IAELjC,EAAQqD,EAAOD,GAAMc,QAAQ,oBAAoB,mBAAUC,EAAOC,iBAExE,MAAI,wBAA0BhB,GAAQF,EAAamB,OAC3CjC,wBAACkC,GACPvC,GAAKA,EACL/B,MAAQA,EACRoD,KAAOA,EACPE,SAAWA,EAASF,GACpBF,aAAeA,IAKhBd,+BAAK1C,UAAYC,EAAWI,YAC3BqC,iCAAO1C,UAAYC,EAAWK,MAAQuE,QAAUxC,GAC7C/B,EACAsD,EAASF,GAAQ,IAAM,IAE1BhB,iCACC1C,UAAYC,EAAWM,MACvB8B,GAAKA,EACLyC,YAAY,MACZC,aAAeA,EAAarB,GAC5BsB,WAAW,QACXpB,SAAWA,EAASF,GACpBuB,gBAAgBrB,EAASF,GACzB9B,IAAM8B,EACNA,KAAOA,EACPwB,KAAK,UAMT,SAASN,SAAevC,OAAIqB,SAAMpD,UAAOsD,aAAUJ,iBAC1CvD,EAAeiE,aAAWL,GAA1B5D,WAGR,OACCyC,+BAAK1C,UAAYC,EAAWI,YAC3BqC,iCAAO1C,UAAYC,EAAWK,MAAQuE,QAAUxC,GAC7C/B,EACAsD,EAAW,IAAM,IAEpBlB,kCAGC1C,UAAYC,EAAWC,OACvBmC,GAAKA,EACLyC,YAAY,MACZC,aAAeA,EAAarB,GAC5BE,SAAWA,EACXqB,gBAAgBrB,EAChBhC,IAAM8B,EACNA,KAAOA,QAEKE,GACXlB,kCAAQyC,MAAQ,CAAEC,MAAO,sBAAyBpF,UAAYC,EAAWkD,OAASrB,MAAM,KAIvF0B,EAAaF,KAAI,mBAClBZ,kCAAQ1C,UAAYC,EAAWkD,OAASrB,MAAQuD,EAAY5B,KAAO7B,IAAMyD,EAAY5B,MAClF4B,EAAY3B,WAQpB,SAASqB,EAAarB,GACrB,IAAM5C,EAAW,CAChBC,QAAS,UACTC,SAAU,gBACVC,SAAU,gBACVC,oBAAqB,iBACrBC,SAAU,iBACVC,YAAa,iBACbC,YAAa,cACbC,aAAc,kBAGf,OAAIoC,KAAQ5C,EACJA,EAAS4C,GAGV,sBAhKgB4B,SAInBA,EAFHC,4BAAiB,SAEdD,EADHrF,wBAAa,KAGdA,OAAkBgD,EAAsBhD,GAExC,IAAMoC,EAAKE,MAC2BI,WAAS4C,GAAxCC,OAAaC,OACd1E,EAAUqC,EAAUoC,GAEpBlF,EAAQS,EAAQ4C,OAAO5C,QAAQyD,QAAQ,oBAAoB,mBAAUC,EAAOC,iBAElF,OACChC,wBAACmB,EAAe6B,UAAS5D,MAAQ,CAAEf,UAASd,eAC3CyC,+BAAK1C,UAAYC,EAAWiD,UAAYiC,MAAQ,CAAEQ,UAAW,eAC5DjD,+BAAK1C,UAAYC,EAAWE,MAC3BuC,+BAAK1C,UAAYC,EAAWG,SAC3BsC,+BAAK1C,UAAYC,EAAWI,YAE3BqC,iCAAO1C,UAAYC,EAAWK,MAAQuE,QAAUxC,GAC7C/B,GAGHoC,kCAAQL,GAAKA,EAAKrC,UAAYC,EAAWC,OAAS4B,MAAQ0D,EAAcI,SAAW,mBAAKH,EAAeI,EAAEC,OAAOhE,SAC7GsC,OAAO2B,OAAO3C,GAAWE,KAAI,mBAC9BZ,kCAAQ1C,UAAYC,EAAWkD,OAASvB,IAAMb,EAAQ0C,KAAO3B,MAAQf,EAAQ0C,MAC1E1C,EAAQ2C,YAQfhB,wBAACqB,GAAK5D,KAAOY,EAAQZ,a","file":"static/js/main.813952c6.chunk.js","sourcesContent":["import { Address } from '@internachi/franklin/dist/franklin.js';\n\nexport default function App() {\n\treturn (\n\t\t<div className=\"container mx-auto my-12 md:flex\">\n\t\t\t<div className=\"md:w-1/2 p-8\">\n\t\t\t\t<h1 className=\"text-right text-4xl tracking-tight font-extrabold text-white sm:leading-none lg:text-6xl xl:text-7xl\">\n\t\t\t\t\t<span className=\"md:block\">The ultimate</span>\n\t\t\t\t\t<span className=\"text-indigo-300 md:block\">address input</span>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div className=\"md:w-1/2\">\n\t\t\t\t<div className=\"bg-white rounded p-8\">\n\t\t\t\t\t<Address\n\t\t\t\t\t\tclassNames={ {\n\t\t\t\t\t\t\tselect: \"block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\",\n\t\t\t\t\t\t\tgrid: \"space-y-2\",\n\t\t\t\t\t\t\tgridRow: \"flex space-x-2\",\n\t\t\t\t\t\t\tgridColumn: \"flex-1\",\n\t\t\t\t\t\t\tlabel: \"block\",\n\t\t\t\t\t\t\tinput: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\"\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './css/tailwind.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n","export const LABELS = 1;\nexport const FIELDS = 2;\nexport const COUNTRY = 3;\nexport const SUBDIVISION = 4;\n\nconst definitions = {\n\t[FIELDS]: [\n\t\t'country',\n\t\t'address1',\n\t\t'address2',\n\t\t'administrative_area',\n\t\t'locality',\n\t\t'sublocality',\n\t\t'postal_code',\n\t\t'sorting_code',\n\t],\n\t[COUNTRY]: [\n\t\t'code',\n\t\t'name',\n\t\t'grid',\n\t\t'labels',\n\t\t'required',\n\t\t'subdivisions',\n\t],\n\t[SUBDIVISION]: [\n\t\t'code',\n\t\t'name',\n\t],\n};\n\nconst defaults = {\n\t[FIELDS]: {\n\t\tcountry: 'country',\n\t\taddress1: 'address',\n\t\taddress2: 'address line 2',\n\t\tadministrative_area: 'province',\n\t\tlocality: 'city',\n\t\tsublocality: 'suburb',\n\t\tpostal_code: 'postal',\n\t\tsorting_code: 'sorting code',\n\t},\n};\n\nexport function compress(data, kind) {\n\tconst compressed = [...definitions[kind]]\n\t\t.map((key, index) => {\n\t\t\tconst value = 'undefined' === typeof data[key] || null === data[key]\n\t\t\t\t? 0\n\t\t\t\t: data[key];\n\t\t\t\n\t\t\treturn kind in defaults && key in defaults[kind] && value === defaults[kind][key]\n\t\t\t\t? 0\n\t\t\t\t: value;\n\t\t});\n\t\n\t// Remove empty values from the end of the array\n\twhile (0 === compressed[compressed.length - 1]) {\n\t\tcompressed.pop();\n\t}\n\t\n\treturn compressed;\n}\n\nexport function compressFlags(flags, kind) {\n\treturn [...definitions[kind]]\n\t\t.reduce((compressed, key, index) => {\n\t\t\tconst flag = Math.pow(2, index);\n\t\t\treturn true === flags[key]\n\t\t\t\t? compressed | flag\n\t\t\t\t: compressed;\n\t\t}, 0);\n}\n\nexport function expand(data, kind) {\n\treturn [...definitions[kind]]\n\t\t.reduce((expanded, key, index) => {\n\t\t\tconst value = 'undefined' === typeof data[index]\n\t\t\t\t? 0\n\t\t\t\t: data[index];\n\t\t\t\n\t\t\texpanded[key] = 0 === value && kind in defaults && key in defaults[kind]\n\t\t\t\t? defaults[kind][key]\n\t\t\t\t: value;\n\t\t\t\n\t\t\treturn expanded;\n\t\t}, {});\n}\n\nexport function expandFlags(flags, kind) {\n\treturn [...definitions[kind]]\n\t\t.reduce((expanded, key, index) => {\n\t\t\tconst flag = Math.pow(2, index);\n\t\t\texpanded[key] = (flags & flag) > 0;\n\t\t\treturn expanded;\n\t\t}, {});\n}\n","import React from 'react';\n\n// Adapted from https://github.com/reach/reach-ui\n\nlet serverHandoffComplete = false;\nlet id = 0;\n\nconst genId = () => ++id;\n\nexport function useId(idFromProps) {\n\tconst initialId = idFromProps || (serverHandoffComplete ? genId() : null);\n\t\n\tconst [id, setId] = React.useState(initialId);\n\t\n\tconst useIsomorphicLayoutEffect = canUseDOM()\n\t\t? React.useLayoutEffect\n\t\t: React.useEffect;\n\t\n\tuseIsomorphicLayoutEffect(() => {\n\t\tif (null === id) {\n\t\t\tsetId(genId());\n\t\t}\n\t}, []);\n\t\n\tReact.useEffect(() => {\n\t\tserverHandoffComplete = true;\n\t}, []);\n\t\n\treturn id != null \n\t\t? `frnkln-${id}`\n\t\t: undefined;\n}\n\nfunction canUseDOM() {\n\treturn !!(\n\t\ttypeof window !== \"undefined\" &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n}\n","import React, { Fragment, useContext, useState } from 'react';\nimport data from '../data.json';\nimport expandCountry from './country.mjs';\nimport { useId } from './useId.mjs';\n\n// TODO:\n//  - Allow for \"common countries\" so you can put your most common countries at top of list\n//  - Controlled / uncontrolled inputs\n//  - More styling control at an input-by-input level\n//  - Explore wrapping in web component / jQuery plugin\n//  - Allow passing IDs\n//  - Validation\n\nconst defaultClassNames = {\n\tcontainer: '',\n\tselect: '',\n\toption: '',\n\tgrid: '',\n\tgridRow: '',\n\tgridColumn: '',\n\tlabel: '',\n\tinput: '',\n};\n\nconst countries = data.reduce((data, compressed) => {\n\tconst country = expandCountry(compressed);\n\tdata[country.code] = country;\n\treturn data;\n}, {});\n\nconst AddressContext = React.createContext({});\n\nexport function Address(props) {\n\tlet {\n\t\tdefaultCountry = 'US',\n\t\tclassNames = {},\n\t} = props;\n\t\n\tclassNames = { ...defaultClassNames, ...classNames };\n\t\n\tconst id = useId();\n\tconst [countryCode, setCountryCode] = useState(defaultCountry);\n\tconst country = countries[countryCode];\n\t\n\tconst label = country.labels.country.replace(/(?:^|\\s)(\\w{1})/g, letter => letter.toUpperCase());\n\t\n\treturn (\n\t\t<AddressContext.Provider value={ { country, classNames } }>\n\t\t\t<div className={ classNames.container } style={ { boxSizing: 'border-box' } }>\n\t\t\t\t<div className={ classNames.grid }>\n\t\t\t\t\t<div className={ classNames.gridRow }>\n\t\t\t\t\t\t<div className={ classNames.gridColumn }>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label className={ classNames.label } htmlFor={ id }>\n\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<select id={ id } className={ classNames.select } value={ countryCode } onChange={ e => setCountryCode(e.target.value) }>\n\t\t\t\t\t\t\t\t{ Object.values(countries).map(country => (\n\t\t\t\t\t\t\t\t\t<option className={ classNames.option } key={ country.code } value={ country.code }>\n\t\t\t\t\t\t\t\t\t\t{ country.name }\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t)) }\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<Grid grid={ country.grid } />\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t{/*<pre>{ JSON.stringify(country, null, 2) }</pre>*/ }\n\t\t\t</div>\n\t\t</AddressContext.Provider>\n\t);\n}\n\nfunction Grid({ grid }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t{ grid.map(row => <GridRow row={ row } />) }\n\t\t</Fragment>\n\t);\n}\n\nfunction GridRow({ row }) {\n\tconst { classNames } = useContext(AddressContext);\n\t\n\tconst columns = Object.entries(row)\n\t\t.filter(([_, enabled]) => enabled)\n\t\t.map(([key]) => key);\n\t\n\treturn (\n\t\t<div className={ classNames.gridRow }>\n\t\t\t{ columns.map(name => <Input name={ name } />) }\n\t\t</div>\n\t);\n}\n\nfunction Input({ name }) {\n\tconst { country, classNames } = useContext(AddressContext);\n\tconst { labels, required, subdivisions } = country;\n\tconst id = useId();\n\t\n\tconst label = labels[name].replace(/(?:^|\\s)(\\w{1})/g, letter => letter.toUpperCase());\n\t\n\tif ('administrative_area' === name && subdivisions.length) {\n\t\treturn <Subdivisions\n\t\t\tid={ id }\n\t\t\tlabel={ label }\n\t\t\tname={ name }\n\t\t\trequired={ required[name] }\n\t\t\tsubdivisions={ subdivisions }\n\t\t/>;\n\t}\n\t\n\treturn (\n\t\t<div className={ classNames.gridColumn }>\n\t\t\t<label className={ classNames.label } htmlFor={ id }>\n\t\t\t\t{ label }\n\t\t\t\t{ required[name] ? '*' : '' }\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tclassName={ classNames.input }\n\t\t\t\tid={ id }\n\t\t\t\tautoCorrect=\"off\"\n\t\t\t\tautoComplete={ autoComplete(name) }\n\t\t\t\tspellCheck=\"false\"\n\t\t\t\trequired={ required[name] }\n\t\t\t\taria-required={ required[name] }\n\t\t\t\tkey={ name }\n\t\t\t\tname={ name }\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction Subdivisions({ id, name, label, required, subdivisions }) {\n\tconst { classNames } = useContext(AddressContext);\n\t// const [value, setValue] = useState(required ? Object.keys(subdivisions)[0] : '');\n\t\n\treturn (\n\t\t<div className={ classNames.gridColumn }>\n\t\t\t<label className={ classNames.label } htmlFor={ id }>\n\t\t\t\t{ label }\n\t\t\t\t{ required ? '*' : '' }\n\t\t\t</label>\n\t\t\t<select\n\t\t\t\t// value={ value }\n\t\t\t\t// onChange={ e => setValue(e.target.value) }\n\t\t\t\tclassName={ classNames.select }\n\t\t\t\tid={ id }\n\t\t\t\tautoCorrect=\"off\"\n\t\t\t\tautoComplete={ autoComplete(name) }\n\t\t\t\trequired={ required }\n\t\t\t\taria-required={ required }\n\t\t\t\tkey={ name }\n\t\t\t\tname={ name }\n\t\t\t>\n\t\t\t\t{ false === required && (\n\t\t\t\t\t<option style={ { color: 'rgba(0, 0, 0, 0.3)' } } className={ classNames.option } value=\"\">\n\t\t\t\t\t\t\n\t\t\t\t\t</option>\n\t\t\t\t) }\n\t\t\t\t{ subdivisions.map(subdivision => (\n\t\t\t\t\t<option className={ classNames.option } value={ subdivision.code } key={ subdivision.code }>\n\t\t\t\t\t\t{ subdivision.name }\n\t\t\t\t\t</option>\n\t\t\t\t)) }\n\t\t\t</select>\n\t\t</div>\n\t);\n}\n\nfunction autoComplete(name) {\n\tconst defaults = {\n\t\tcountry: 'country',\n\t\taddress1: 'address-line1',\n\t\taddress2: 'address-line2',\n\t\tadministrative_area: 'address-level1',\n\t\tlocality: 'address-level2',\n\t\tsublocality: 'address-level3',\n\t\tpostal_code: 'postal-code',\n\t\tsorting_code: 'address-level4', // FIXME\n\t};\n\t\n\tif (name in defaults) {\n\t\treturn defaults[name];\n\t}\n\t\n\treturn '';\n}\n","import { expand, expandFlags, COUNTRY, FIELDS, SUBDIVISION } from './mappers.mjs';\n\nexport default function expandCountry(compressed) {\n\t\tconst expanded = expand(compressed, COUNTRY);\n\t\t\n\t\texpanded.grid = expanded.grid.map(row => expandFlags(row, FIELDS));\n\t\texpanded.subdivisions = expanded.subdivisions.map(([code, name]) => {\n\t\t\tname = name || code;\n\t\t\treturn { code, name };\n\t\t});\n\t\texpanded.labels = expand(expanded.labels, FIELDS);\n\t\texpanded.required = expandFlags(expanded.required, FIELDS);\n\t\t\n\t\treturn expanded;\n}\n"],"sourceRoot":""}